/* Document Details Table */
.doc-details-table {
  width: 100%;
  max-width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: white;
  box-shadow: var(--shadow-md);
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin: 0 0 var(--spacing-xl) 0;
  font-size: clamp(0.85rem, 0.9vw, 1.1rem);
  table-layout: fixed; /* Deterministic column sizing, prevents Location from collapsing and leaving unused right-side space */
}

.doc-details-table th,
.doc-details-table td {
  padding: 0.8vh 1vw;
  text-align: left;
  border-bottom: 1px solid #f0f0f0;
  white-space: normal;
  word-break: normal;
  overflow-wrap: anywhere;
  vertical-align: middle;
}

.doc-details-table th {
  background: var(--color-bg-gray);
  color: var(--color-primary);
  font-weight: 600;
  letter-spacing: 0.02em;
  border-bottom: 2px solid #e0e0e0;
}

.doc-details-table tr:last-child td {
  border-bottom: none;
}

.doc-details-table tr.document-card {
  cursor: pointer;
  transition: background var(--transition-fast);
}

.doc-details-table tr.document-card:hover {
  background: var(--color-bg-hover);
  transform: scale(1.01);
  transition: all var(--transition-fast);
}

.doc-file-title {
  font-weight: 500;
  color: var(--color-primary-dark);
  /* Allow breaks only at zero-width spaces inserted before separators */
  word-break: normal;
  overflow-wrap: anywhere;
  hyphens: none;
  white-space: nowrap; /* Plenty of horizontal room, avoid wrapping for nicer spacing */
}

/* Location column styling */
.doc-location {
  color: var(--color-text-light);
  font-size: 0.9em;
  /* Never truncate this column. Always allow wrapping so we can utilize available width. */
  white-space: normal;
  overflow: visible;
  text-overflow: clip;

  /* Prefer breaks at separators (we insert ZWSP in JS) but allow fallback wrapping when needed. */
  word-break: break-word;
  overflow-wrap: anywhere;
  hyphens: none;

  /* Ensure the cell can shrink and reflow inside a table layout (prevents ellipsis-like behavior). */
  min-width: 0;
}

/* UPDATE 9/10 hardening:
   Force the Location table cell itself to wrap and never ellipsize.
   Some browser table layout edge cases (notably sticky headers) can cause
   constraints to apply at the td level even when the inner content wraps. */
.doc-details-table td.doc-location,
.doc-details-table th.doc-location {
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  max-width: none;
}

/* Defensive: ensure no nested rule can force ellipsis for Location content */
.doc-location,
.doc-location * {
  max-width: none;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

/* Column Width Distribution
   The document list table can be rendered in two shapes:
   1. 4 columns: Name, Date Modified, Modified By, Location
   2. 5 columns: (Select checkbox), Name, Date Modified, Modified By, Location
   These fixed widths prevent the "Location" column from leaving unused space to the right when a
   leading selection column is present.
*/

/* 5-column variant (preferred): checkbox + 4 data columns
   IMPORTANT: Apply only when the table truly has a selection column.
   This avoids leaving unused width when rendered as a 4-column table.
*/
.doc-details-table.has-select-column th:nth-child(1),
.doc-details-table.has-select-column td:nth-child(1) { width: 44px; } /* Select checkbox */

.doc-details-table.has-select-column th:nth-child(2),
.doc-details-table.has-select-column td:nth-child(2) { width: 33%; } /* Name */

.doc-details-table.has-select-column th:nth-child(3),
.doc-details-table.has-select-column td:nth-child(3) { width: 14%; } /* Date Modified */

.doc-details-table.has-select-column th:nth-child(4),
.doc-details-table.has-select-column td:nth-child(4) { width: 12%; } /* Modified By */

/* Let Location consume the remainder. */
.doc-details-table.has-select-column th:nth-child(5),
.doc-details-table.has-select-column td:nth-child(5) { width: auto; } /* Location */

/* 4-column variant (no checkbox column)
   Use deterministic widths under fixed table layout:
   - Columns 1-3 are fixed percentages
   - Location consumes the remainder using width:auto
   This prevents the Location column from collapsing and removes the perceived right-side gap.
*/
.doc-details-table:not(.has-select-column) th:nth-child(1),
.doc-details-table:not(.has-select-column) td:nth-child(1) { width: 35%; } /* Name */

.doc-details-table:not(.has-select-column) th:nth-child(2),
.doc-details-table:not(.has-select-column) td:nth-child(2) { width: 15%; } /* Date Modified */

.doc-details-table:not(.has-select-column) th:nth-child(3),
.doc-details-table:not(.has-select-column) td:nth-child(3) { width: 12%; } /* Modified By */

/* Let Location consume remaining width (last-column remainder behavior for fixed layout). */
.doc-details-table:not(.has-select-column) th:nth-child(4),
.doc-details-table:not(.has-select-column) td:nth-child(4) { width: auto; } /* Location */

/* Strongest guarantee: Location must show full string, wrap when needed, never ellipsize. */
.doc-details-table:not(.has-select-column) td:nth-child(4) {
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
  text-overflow: clip;
  overflow: visible;
  min-width: 0;
  max-width: none;
}


/* Date modified column styling */
.doc-date-modified {
  white-space: nowrap; /* Keep date on one line for cleaner spacing */
}

@media (max-width: 48rem) {
  .doc-details-table {
    font-size: clamp(0.8rem, 2.2vw, 1rem);
    table-layout: fixed; /* Allow auto sizing on mobile */
    width: 100%;
  }
  
  .doc-details-table th,
  .doc-details-table td {
    padding: 1vh 1.8vw;
    font-size: clamp(0.75rem, 2vw, 0.95rem);
  }
}
