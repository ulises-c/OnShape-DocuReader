/* Document Detail View */
.detail-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  background: white;
  padding: var(--spacing-lg);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-sm);
  margin-bottom: var(--spacing-xl);
}

.detail-header h2 {
  color: var(--color-primary);
  flex: 1;
}

#getDocumentBtn {
  margin-left: auto;
}

.document-info {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--spacing-xl);
}

/* Prevent grid children from forcing overflow when they contain long content.
   This is a common CSS Grid behavior: without min-width: 0, children can overflow and cause clipping. */
.document-info > * {
  min-width: 0;
}

.thumbnail-container {
  text-align: center;
}

.document-thumbnail {
  transition: transform var(--transition-base), box-shadow var(--transition-base);
  border: 1px solid #e0e0e0;
}

.document-thumbnail:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2) !important;
}

.thumbnail-info {
  font-style: italic;
}

.element-item {
  padding: var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: 5px;
  margin-bottom: var(--spacing-md);
  background: var(--color-bg-card);
  cursor: pointer;
  transition: all var(--transition-base);
}

.element-item:last-child {
  margin-bottom: 0;
}

.element-item:hover {
  background: var(--color-bg-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow-hover);
}

.element-name {
  font-weight: 500;
  color: var(--color-primary);
  margin-bottom: var(--spacing-sm);
}

.element-type {
  color: var(--color-text-light);
  font-size: 0.9rem;
}

/* Ensure the element action buttons do not overflow on narrow widths */
.element-actions {
  flex-wrap: wrap;
  justify-content: flex-end;
  min-width: 0;
}

/* Element list row layout can be constrained by nested flex children.
   Provide safe defaults so the info block can shrink and the actions can wrap
   instead of forcing horizontal overflow and clipping. */
.element-container {
  min-width: 0;
  gap: var(--spacing-md);
}

.element-container .element-item {
  min-width: 0;
}

.element-container .element-actions {
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
  gap: 6px;
  max-width: 100%;
}

/* When the view is very narrow, allow action buttons to wrap cleanly and align left
   so they stay visible without clipping or forcing horizontal scrolling. */
@media (max-width: 560px) {
  .element-container {
    flex-direction: column;
    align-items: stretch;
  }

  .element-container .element-actions {
    justify-content: flex-start;
    width: 100%;
  }
}

/* Unified History Selector Section (Versions + Branches) */
.history-selector-section {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
}

.history-selector-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--spacing-md);
}

.history-selector-header h4 {
  margin: 0;
  color: var(--color-primary);
  font-size: 1rem;
}

.history-selector-content {
  min-height: 60px;
}

.history-hint,
.history-loading,
.history-empty,
.history-error {
  color: var(--color-text-light);
  font-style: italic;
  margin: 0;
  padding: var(--spacing-sm) 0;
}

.history-error {
  color: var(--color-error, #e74c3c);
}

.history-dropdown-container {
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  margin-bottom: var(--spacing-md);
}

.history-dropdown-container label {
  font-weight: 500;
  white-space: nowrap;
}

.history-select {
  flex: 1;
  max-width: 500px;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-size: 0.9rem;
  background: white;
  cursor: pointer;
}

.history-select:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.15);
}

.history-details {
  max-height: 220px;
  overflow-y: auto;
  border-top: 1px solid var(--color-border);
  padding-top: var(--spacing-md);
  margin-top: var(--spacing-sm);
}

.history-detail-card {
  background: var(--color-bg-dark);
  border-radius: var(--radius-sm);
  padding: var(--spacing-md);
}

.history-detail-card h5 {
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--color-primary);
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-wrap: wrap;
}

.history-type-badge {
  font-size: 0.7rem;
  padding: 2px 8px;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  font-weight: 600;
}

.history-type-version {
  background: var(--color-info, #17a2b8);
  color: white;
}

.history-type-branch {
  background: var(--color-warning, #ffc107);
  color: #212529;
}

.history-main-badge {
  background: var(--color-success, #28a745);
  color: white;
  font-size: 0.7rem;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  text-transform: uppercase;
  font-weight: 600;
}

.history-detail-row {
  display: flex;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-xs);
  font-size: 0.9rem;
}

.history-label {
  font-weight: 500;
  color: var(--color-text-light);
  min-width: 100px;
}

.history-value {
  color: var(--color-text);
  word-break: break-word;
}

.history-value.history-id {
  font-family: monospace;
  font-size: 0.85rem;
}

/* History Actions Section */
.history-actions {
  margin-top: var(--spacing-md);
  padding-top: var(--spacing-md);
  border-top: 1px solid var(--color-border);
}

.history-actions-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
}

.history-action-btn {
  font-size: 0.85rem;
  padding: var(--spacing-xs) var(--spacing-md);
}

.history-actions-note {
  font-size: 0.8rem;
  color: var(--color-text-light);
  font-style: italic;
  margin: 0;
}

/* History context notes */
.history-context-note {
  margin-top: var(--spacing-md);
  padding: var(--spacing-sm) var(--spacing-md);
  border-radius: var(--radius-sm);
  font-size: 0.85rem;
}

.history-context-active {
  background: rgba(40, 167, 69, 0.1);
  border: 1px solid var(--color-success, #28a745);
  color: var(--color-success, #28a745);
}

.history-context-version {
  background: rgba(23, 162, 184, 0.1);
  border: 1px solid var(--color-info, #17a2b8);
  color: var(--color-info, #17a2b8);
}

/* Elements loading/error states */
.elements-loading,
.elements-error {
  padding: var(--spacing-lg);
  text-align: center;
  color: var(--color-text-light);
  font-style: italic;
}

.elements-error {
  color: var(--color-error, #e74c3c);
}

@media (max-width: 1024px) {
  .document-info {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 768px) {
  .detail-header {
    flex-direction: column;
    text-align: center;
    padding: 2vh 3vw;
  }

  .history-dropdown-container {
    flex-direction: column;
    align-items: stretch;
  }

  .history-select {
    max-width: none;
  }

  .history-detail-row {
    flex-direction: column;
    gap: 2px;
  }

  .history-label {
    min-width: auto;
  }

  .history-actions-buttons {
    flex-direction: column;
  }

  .history-action-btn {
    width: 100%;
  }
}
